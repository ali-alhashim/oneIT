<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: head}">

</head>
<body class="bg-body-secondary">

<div th:replace="~{fragments/header :: header}"></div>

<div class="container bordered my-5">

  <div class="row" id="toolbar">
    <div class="col-4">
      <a href="/procurement/addPayment" class="btn btn-success">Add</a>
    </div>

    <div class="col-4">
      <a href="#" class="btn btn-outline-success">Import CSV</a>
    </div>

    <div class="col-4">
      <form method="get">
        <div class="row">
          <div class="col">
            <input type="text" name="keyword" class="form-control" placeholder="Enter Keyword..."/>
          </div>
          <div class="col">
            <input type="submit" class="btn btn-dark" value="Search">
          </div>


        </div>
      </form>
    </div>
  </div>
  <hr/>
  <!-- list  -->
  <div class="table-responsive">
    <table class="table border">
      <thead>
      <td><input type="checkbox" name="all"/> </td>
      <th>#</th>
      <th>Created At</th>
      <th>Vendor</th>
      <th>Bank Name</th>
      <th>IBAN</th>
      <th>Invoice Number</th>
      <th>Amount</th>
      <th>PDF</th>

      </thead>

      <tbody>
      <tr th:each="payment: ${payments}">
        <td>
          <input type="checkbox" name="id" th:value="${payment.id}"/>
        </td>

        <td>
          <a class="btn btn-info" th:text="${payment.id}" th:href="@{/procurement/paymentDetail(id=${payment.id})}"></a>
        </td>


        <td th:text="${payment.createdAt}"></td>
        <td th:text="${payment.invoice.vendor.name}"></td>
        <td th:text="${payment.bankName}"></td>
        <td th:text="${payment.iban}"></td>
        <td th:text="${payment.invoice.invoiceNumber}"></td>
        <td th:text="${payment.amount}"></td>
        <td>
          <a target="_blank" th:href="${payment.pdfFileName != null ? '/upload/payment/' + payment.id + '/' + payment.pdfFileName : '#'}"
             th:text="${payment.pdfFileName != null ? payment.pdfFileName : 'No PDF'}">
          </a>
        </td>

      </tr>

      </tbody>
    </table>
  </div>
  <!--/ list -->


  <!--Page navigation -->
  <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
      <!-- Previous Button -->
      <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
        <a class="page-link" th:href="@{/procurement/payment(page=${currentPage - 1}, size=${pageSize})}" tabindex="-1">Previous</a>
      </li>

      <!-- Start of Pagination Numbers -->
      <li class="page-item" th:if="${currentPage > 2}">
        <a class="page-link" th:href="@{/procurement/payment(page=0, size=${pageSize})}">1</a>
      </li>
      <li class="page-item disabled" th:if="${currentPage > 2}">
        <a class="page-link">...</a>
      </li>

      <!-- Dynamic Page Numbers -->
      <li class="page-item" th:each="i : ${#numbers.sequence(currentPage - 2 > 0 ? currentPage - 2 : 0, currentPage + 2 < totalPages - 1 ? currentPage + 2 : totalPages - 1)}"
          th:classappend="${i == currentPage} ? 'active'">
        <a class="page-link" th:href="@{/procurement/payment(page=${i}, size=${pageSize})}" th:text="${i + 1}"></a>
      </li>

      <!-- End of Pagination Numbers -->
      <li class="page-item disabled" th:if="${currentPage < totalPages - 3}">
        <a class="page-link">...</a>
      </li>
      <li class="page-item" th:if="${currentPage < totalPages - 3}">
        <a class="page-link" th:href="@{/procurement/payment(page=${totalPages - 1}, size=${pageSize})}" th:text="${totalPages}"></a>
      </li>

      <!-- Next Button -->
      <li class="page-item" th:classappend="${currentPage == totalPages - 1} ? 'disabled'">
        <a class="page-link" th:href="@{/procurement/payment(page=${currentPage + 1}, size=${pageSize})}">Next</a>
      </li>
    </ul>
  </nav>

  <!--/page navigation-->

</div>


<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>