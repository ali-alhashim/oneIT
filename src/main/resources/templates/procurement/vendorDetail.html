<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: head}">

</head>
<body>

<div th:replace="~{fragments/header :: header}"></div>

<main>

  <div class="container bordered my-5 ">




    <!--toolbar-->
    <div class="row rounded border p-4 bg-light">
      <div class="row my-3">


        <div class="col-2">
          <a class="btn btn-success" th:href="@{/procurement/editVendor(id=${vendor.id})}">Edit</a>
        </div>

        <div class="col-2">
          <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addContactModal">Add Contact</button>
        </div>


      </div>

      <!-- -->


    </div>
    <!--/toolbar-->

    <!--basic info -->
    <div class="row rounded border p-4 bg-light">


      <table class="table   border">

        <tr>
          <th>Created At </th> <td th:text="${vendor.createdAt}"></td>
        </tr>

        <tr>
          <th>Id </th> <td th:text="${vendor.id}"></td>
        </tr>



        <tr>
          <th>Updated At</th> <td th:text="${vendor.updatedAt}"></td>
        </tr>

        <tr>
          <th>Name</th> <td th:text="${vendor.name}"></td>
        </tr>

        <tr>
          <th>AR.Name</th> <td th:text="${vendor.arName}"></td>
        </tr>

        <tr>
          <th>Website</th> <td><a th:href="${vendor.website}" th:text="${vendor.website}" target="_blank"></a></td>
        </tr>

        <tr>
          <th>Registration Number</th> <td th:text="${vendor.registrationNumber}"></td>
        </tr>

        <tr>
          <th>VAT Number</th> <td th:text="${vendor.taxNumber}"></td>
        </tr>

        <tr>
          <th>IBAN</th> <td th:text="${vendor.iban}"></td>
        </tr>

        <tr>
          <th>Bank Name</th> <td th:text="${vendor.bankName}"></td>
        </tr>

        <tr>
          <th>Address</th> <td th:text="${vendor.address}"></td>
        </tr>


      </table>

    </div>
    <!--/basic info -->











    <hr/>
    <div>
      <table class="table">
        <thead>
        <tr>
          <th>#</th>
          <th>Photo</th>
          <th>Name</th>
          <th>AR.Name</th>
          <th>Mobile</th>
          <th>Email</th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="contact:${vendor.representatives}">
          <td th:text="${contact.id}"></td>
          <td></td>
          <td th:text="${contact.name}"></td>
          <td th:text="${contact.arName}"></td>
          <td th:text="${contact.mobile}"></td>
          <td th:text="${contact.email}"></td>
        </tr>
        </tbody>
      </table>
    </div>

    <hr/>






  </div><!--/Container -->



  <!-- Modal -->
  <div class="modal fade" id="addContactModal" tabindex="-1" aria-labelledby="addContactModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addContactModalLabel">Add Contact</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">

          <form id="addContactForm" method="POST" action="/procurement/addContact"  th:with="_csrfToken=${_csrf.token}" enctype="multipart/form-data">

            <input type="hidden" name="vendorId" th:value="${vendor.id}"  />

            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrfToken}" />

            <div class="mb-3">
                <label for="name">Name</label>
                <input id="name" name="name" class="form-control">
            </div>


            <div class="mb-3">
              <label for="name">AR.Name</label>
              <input id="arName" name="arName" class="form-control">
            </div>

            <div class="mb-3">
              <label for="email">Email</label>
              <input id="email" name="email" class="form-control">
            </div>

            <div class="mb-3">
              <label for="mobile">Mobile</label>
              <input id="mobile" name="mobile" class="form-control">
            </div>


            <div class="mb-3">
              <label for="imageFile">Photo</label>
              <input type="file" id="imageFile" name="imageFile" class="form-control" >
            </div>



          </form>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" id="saveContactButton">Save</button>
        </div>
      </div>
    </div>
  </div>

    <script>
       $('#saveContactButton').on('click', function ()
       {
          const form = $('#addContactForm');

            form.submit();
         });
    </script>
  <!--/modal-->






</main>
<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>